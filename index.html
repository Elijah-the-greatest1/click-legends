<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Click Legends</title>
<style>
  body {
    margin: 0;
    background: #1a1a1a;
    color: white;
    font-family: Arial, sans-serif;
    overflow: hidden;
    text-align: center;
  }
  canvas {
    background: linear-gradient(#0a3d62, #1e90ff);
    display: block;
    margin: auto;
  }
  #ui {
    position: absolute;
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 18px;
  }
</style>
</head>
<body>

<div id="ui">
  ‚è±Ô∏è Time: <span id="time">60</span> |
  üèÜ Score: <span id="score">0</span> |
  üî• Combo: <span id="combo">0</span> |
  üíæ High: <span id="high">0</span>
</div>

<canvas id="game" width="360" height="600"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let score = 0;
let combo = 0;
let time = 60;
let highScore = localStorage.getItem("high") || 0;

document.getElementById("high").textContent = highScore;

const ball = {
  x: 180,
  y: 500,
  r: 16,
  vy: 0
};

let hoops = [];
let coins = [];
let powerUps = [];
let gravity = 0.6;
let jumpPower = -10;
let gameOver = false;
let shake = 0;

function spawnHoop() {
  hoops.push({
    x: Math.random() * 260 + 50,
    y: Math.random() * 200 + 150,
    r: 22,
    points: Math.random() < 0.3 ? 3 : 2
  });
}

function spawnCoin() {
  coins.push({
    x: Math.random() * 300 + 30,
    y: Math.random() * 300 + 100,
    r: 8
  });
}

function spawnPowerUp() {
  powerUps.push({
    x: Math.random() * 300 + 30,
    y: Math.random() * 300 + 100,
    r: 10
  });
}

setInterval(spawnHoop, 1500);
setInterval(spawnCoin, 2500);
setInterval(spawnPowerUp, 5000);

canvas.addEventListener("click", tap);
canvas.addEventListener("touchstart", e => {
  e.preventDefault();
  tap();
});

function tap() {
  if (gameOver) return;
  ball.vy = jumpPower;
  ball.x += 30; // ONLY moves forward on tap
}

function update() {
  if (gameOver) return;

  ball.vy += gravity;
  ball.y += ball.vy;

  if (ball.y > 520) {
    ball.y = 520;
    ball.vy = 0;
    combo = 0;
  }

  hoops.forEach((h, i) => {
    if (dist(ball, h) < ball.r + h.r) {
      score += h.points * (combo + 1);
      combo++;
      shake = 10;
      hoops.splice(i, 1);
    }
  });

  coins.forEach((c, i) => {
    if (dist(ball, c) < ball.r + c.r) {
      score += 1;
      coins.splice(i, 1);
    }
  });

  powerUps.forEach((p, i) => {
    if (dist(ball, p) < ball.r + p.r) {
      jumpPower = -14;
      setTimeout(() => jumpPower = -10, 3000);
      powerUps.splice(i, 1);
    }
  });

  if (score > highScore) {
    highScore = score;
    localStorage.setItem("high", highScore);
    document.getElementById("high").textContent = highScore;
  }

  document.getElementById("score").textContent = score;
  document.getElementById("combo").textContent = combo;
}

function draw() {
  ctx.clearRect(0,0,360,600);

  if (shake > 0) {
    ctx.translate(Math.random()*6-3, Math.random()*6-3);
    shake--;
  }

  // Basketball
  ctx.fillStyle = "orange";
  ctx.beginPath();
  ctx.arc(ball.x, ball.y, ball.r, 0, Math.PI*2);
  ctx.fill();

  ctx.strokeStyle = "black";
  ctx.beginPath();
  ctx.moveTo(ball.x-ball.r, ball.y);
  ctx.lineTo(ball.x+ball.r, ball.y);
  ctx.moveTo(ball.x, ball.y-ball.r);
  ctx.lineTo(ball.x, ball.y+ball.r);
  ctx.stroke();

  // Hoops
  hoops.forEach(h => {
    ctx.strokeStyle = h.points === 3 ? "gold" : "red";
    ctx.lineWidth = 4;
    ctx.beginPath();
    ctx.arc(h.x, h.y, h.r, 0, Math.PI*2);
    ctx.stroke();
  });

  // Coins
  coins.forEach(c => {
    ctx.fillStyle = "yellow";
    ctx.beginPath();
    ctx.arc(c.x, c.y, c.r, 0, Math.PI*2);
    ctx.fill();
  });

  // PowerUps
  powerUps.forEach(p => {
    ctx.fillStyle = "lime";
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
    ctx.fill();
  });

  ctx.setTransform(1,0,0,1,0,0);
}

function dist(a,b) {
  return Math.hypot(a.x-b.x, a.y-b.y);
}

setInterval(() => {
  if (time > 0) {
    time--;
    document.getElementById("time").textContent = time;
  } else {
    gameOver = true;
    alert("Time up! Final Score: " + score);
  }
}, 1000);

function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}

loop();
</script>

</body>
</html>

